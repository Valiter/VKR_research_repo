import re
from collections import Counter

# Словарь ключевых слов с весами, отражающими значимость для манипулирования и макиавеллизма
keywords_weights = {
    "хвастовство": 3,
    "жадность": 4,
    "обман": 5,
    "насмешка": 3,
    "хитрость": 5,
    "наивность": 3,
    "ум": 2,
    "глупость": 4,
    "сокровища": 2,
    "обещать": 3,
    "стремление": 2,
    "самоутверждение": 3,
    "намерение": 3,
    "цель": 3,
    "обольщение": 4,
    "манипуляция": 5,
    "ловушка": 4,
    "обмануть": 5,
    "хитрый": 4,
    "обманщик": 5,
    "контроль": 4,
    "влияние": 3,
    "стратегия": 4,
}


def calculate_machiavellian_score(text, keywords_weights):
    """
    Подсчитывает итоговый балл проявления манипулирования и макиавеллизма в тексте
    на основе частоты ключевых слов и их весов.

    Args:
        text (str): Текст для анализа.
        keywords_weights (dict): Словарь {слово: вес}.

    Returns:
        int: Итоговый балл.
    """
    # Приводим текст к нижнему регистру
    text = text.lower()

    # Убираем знаки препинания
    text = re.sub(r'[^\w\s]', '', text)

    # Разбиваем на слова
    words = text.split()

    # Подсчет частоты слов
    word_counts = Counter(words)

    score = 0
    print("Анализ ключевых слов и их вклада в общий балл:\n")
    for word, weight in keywords_weights.items():
        count = word_counts.get(word, 0)
        if count > 0:
            print(f"Слово '{word}' встречается {count} раз(а), вес {weight}, вклад: {count * weight}")
        score += count * weight

    return score


# Текст сказки и анализа
text = """
Жили-были две сороки и любили они хвастаться своими находками. Первую сороку звали Кира, а вторую Мира. И вот однажды Кира приходит к Мире, чтобы показать свою очередную находку и похвастаться -это была маленькая золотая веточка, видимо, некогда являющейся частью какой-нибудь брошки, искривленная, словно застывшее пламя. Кира, взъерошив перья от важности, продемонстрировала Мире свою находку. Мира, не желая отставать, вынула из-за спины блестящий осколок бирюзы, необычной, неравномерной формы. Обе сороки принялись соревноваться в описании достоинств своих сокровищ, их щебетание превратилось в неумолкающий поток хвастовства.

Вдруг, с ветки старого дуба, каркнул Ворон, огромный и черно-блестящий. Его проницательные глаза следили за спорящими сороками.
— Черт возьми, какая шумиха! — прокаркал он, голос его был хриплым и низким, как шепот осеннего ветра. -  И ради чего весь этот цирк? Блестящие штучки, а ум-то где?

Сороки опешили. Они не привыкли к такой наглости. Ворон, обычно молчаливый и неприметный, вдруг стал центром внимания.

— А я, — продолжил Ворон, медленно расправляя крылья, — знаю место, где есть настоящие сокровища! Не эти ваши осколки и веточки! Там целое богатство! 

Глаза сорок загорелись жадностью. Они забыли о своих скромных находках. Ворон указал когтистой лапой в сторону густого леса.

— Идите за мной, — прокаркал он. — Но будьте осторожны, путь нелёгкий.
Сороки, забыв о своей ссоре, последовали за вороном. Он повёл их по запутанным тропинкам, всё глубже в лес, а затем показал на колодец, заросший мхом и глубокий, как пропасть.

— Сокровища на дне! — прокаркал Ворон, и исчез в тоже мгновение среди лесных зарослей.

Сороки с трудом спустились в колодец, и что же они увидели? На дне лежал… огромный зеркальный шар. Он отражал свет, заставляя всё вокруг сиять ярко и величественно.

— Ха-ха-ха! — раздался сверху смех ворона. — Мои сокровища! Они бесценны, потому что отражают самую великую ценность — вашу глупость! Вы верите в сказки о легкой наживе!

Огорчённые и одураченные, сороки выбрались из колодца. Они поняли, что их хитростью обманул хитрейший Ворон. С тех пор Кира и Мира стали значительно скромнее в своих хвастовствах, и больше не верили в легко обещанные сокровища. Урок, преподанный хитрым вороном, они запомнили надолго.
"""

if __name__ == "__main__":
    score = calculate_machiavellian_score(text, keywords_weights)
    print(f"\nИтоговый балл проявления манипулирования и макиавеллизма: {score}")
